"use strict";(self["webpackChunkcovid19_exercise"]=self["webpackChunkcovid19_exercise"]||[]).push([[771],{771:function(t,e,a){a.r(e),a.d(e,{default:function(){return B}});var s=a(252),r=a(963),i=a(577);const l={class:"chart"},n={class:"main"},o={class:"border-bottom d-flex flex-wrap mb-4"},c={class:"radio d-flex align-items-center mb-3"},h=(0,s._)("span",null,"顯示",-1),u=["value"],d={class:"d-flex align-items-center mb-3 ms-auto"},p=(0,s._)("span",null,"顯示天數",-1),m=["value"],g={class:"chartBox mb-4"};function v(t,e,a,v,b,L){const w=(0,s.up)("PageTitle"),f=(0,s.up)("LineChart"),x=(0,s.up)("BarChart");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s.Wm)(w,{text:"台灣確診疫情統計圖"}),(0,s._)("div",n,[(0,s._)("div",o,[(0,s._)("div",c,[h,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(b.radioInputList,((t,a)=>((0,s.wg)(),(0,s.iD)("label",{class:"ms-3",key:t.title},[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"radio",value:a,"onUpdate:modelValue":e[0]||(e[0]=t=>b.radioIndex=t)},null,8,u),[[r.G2,b.radioIndex]]),(0,s.Uk)(" "+(0,i.zw)(t.title),1)])))),128))]),(0,s._)("div",d,[p,(0,s.wy)((0,s._)("select",{class:"form-select form-select-sm w-auto ms-2","onUpdate:modelValue":e[1]||(e[1]=t=>b.selectIndex=t)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(b.selectInputList,((t,e)=>((0,s.wg)(),(0,s.iD)("option",{key:t.title,value:e},(0,i.zw)(t.title),9,m)))),128))],512),[[r.bM,b.selectIndex]])])]),(0,s._)("div",g,[(0,s.Wm)(f,{chartData:L.chartLineData,class:(0,i.C_)(["chartItem",{show:"line"===b.radioInputList[b.radioIndex].value}])},null,8,["chartData","class"]),(0,s.Wm)(x,{chartData:L.chartBarData,class:(0,i.C_)(["chartItem",{show:"bar"===b.radioInputList[b.radioIndex].value}])},null,8,["chartData","class"])])])])}var b=a(50),L=a(764),w=a(728);w.kL.register(w.Dx,w.u,w.De,w.jn,w.f$,w.od,w.uw);var f=(0,s.aZ)({name:"LineChart",components:{Line:L.x1},props:{chartData:{type:Object},chartTitle:{type:String},chartTitleIsShow:{type:Boolean,default:!1},height:{type:Number,default:400}},setup(t){const e={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},title:{display:t.chartTitleIsShow,text:t.chartTitle}}};return()=>(0,s.h)(L.x1,{chartData:t.chartData,chartOptions:e,height:t.height})}});const x=f;var D=x;w.kL.register(w.Dx,w.u,w.De,w.ZL,w.uw,w.f$);var I=(0,s.aZ)({name:"BarChart",components:{Bar:L.$Q},props:{chartData:{type:Object},chartTitle:{type:String},chartTitleIsShow:{type:Boolean,default:!1},height:{type:Number,default:400}},setup(t){const e={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},title:{display:t.chartTitleIsShow,text:t.chartTitle}},scales:{x:{stacked:!0},y:{stacked:!0}}};return()=>(0,s.h)(L.$Q,{chartData:t.chartData,chartOptions:e,height:t.height})}});const y=I;var C=y,k={name:"ChartView",components:{PageTitle:b.Z,LineChart:D,BarChart:C},props:{dataList:Array,latestDate:String,taiwanList:Array},data(){return{radioIndex:0,radioInputList:[{title:"長條圖",value:"bar"},{title:"折線圖",value:"line"}],selectIndex:0,selectInputList:[{num:30,title:"近 30 日"},{num:90,title:"近 90 日"},{num:180,title:"近 180 日"},{num:365,title:"近 365 日"},{num:500,title:"近 500 日"}]}},computed:{dateList(){const t={sort:[],map:{}};return this.dataList.forEach((({id:e,date:a,city:s,town:r,gender:i,overseas:l,age:n})=>{t.map[a]||(t.sort.push(a),t.map[a]={sort:[],map:{}}),t.map[a].sort.push(e),t.map[a].map[e]={city:s,town:r,gender:i,overseas:l,age:n}})),t},chartNum(){return this.selectInputList[this.selectIndex].num},chartBarData(){const t=this.dateList.sort.slice(0,this.chartNum).reverse(),e=[],a=[];return t.forEach((t=>{const s=this.dateList.map[t].sort.filter((e=>!this.dateList.map[t].map[e].overseas)).length;e.push(s);const r=this.dateList.map[t].sort.filter((e=>this.dateList.map[t].map[e].overseas)).length;a.push(r)})),{labels:t,datasets:[{label:"當日本土新增",backgroundColor:"#198754",borderColor:"#198754",data:e},{label:"當日境外移入",backgroundColor:"#6366e0",borderColor:"#6366e0",data:a}]}},chartLineData(){const t=this.dateList.sort.slice(0,this.chartNum).reverse(),e=[];return t.forEach((t=>{const a=this.dateList.map[t].sort.length;e.push(a)})),{labels:t,datasets:[{label:"當日總確診人數",backgroundColor:"#dc3545",borderColor:"#dc3545",data:e}]}}}},_=a(744);const T=(0,_.Z)(k,[["render",v]]);var B=T}}]);
//# sourceMappingURL=771.7f948fa7.js.map